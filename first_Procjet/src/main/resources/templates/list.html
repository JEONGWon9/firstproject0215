<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
	crossorigin="anonymous">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
	crossorigin="anonymous"></script>
<script type="text/javascript">
	function rowClicked(value) {

		location.href = "/noticeInfoView?idx=" + value;
	}
	
	var actionForm = $('#actionForm'); $('.paginate_button a').on('click', function(e) { e.preventDefault(); 
	//걸어둔 링크로 이동하는 것을 일단 막음 
	actionForm.find('input[name="pageNum"]').val($(this).attr('href')); actionForm.submit(); });
	
</script>
<title>List View</title>
</head>
<body>

	<div class="container">
	
		<br>
		<h1 align="center"><a th:href=@{/list} style=" text-decoration: none; color:maroon; font-weight: bold;">공지사항</a></h1>
		<table class="table table-hover table-bordered mt-5" >
			<thead>
				<tr>
					<th>번호</th>
					<th>제목</th>
					<th>글쓴이</th>
					<th>작성일</th>
					
					
					
					
					<th>조회수</th>
				</tr>
			</thead>
			<tbody>
				<tr class="table-warning text-success" >
					<td align="center" colspan="5" style="font-weight: bold; color: red;"> 메인공지</td>
				</tr>
				<tr class="table-warning text-success"style="font-weight: bold;"  th:each="ma:${main}" th:onclick="'javascript:rowClicked(\''+${ma.idx}+'\');'">
					<td th:text="'★  '+${ma.idx}"></td>
					<td class="text-overflow" style="width: 50%" align="center" th:text="${ma.title}"></td>
					<td th:text="${ma.writer}"></td>
					<td th:text="${ma.writeDate}"></td>
					<td th:text="${ma.readCount}"></td>
				</tr>
			
				<tr th:each="row:${noitceList}"
					th:onclick="'javascript:rowClicked(\''+${row.idx}+'\');'">
					<td th:text="${row.idx}"></td>
					<td class="text-overflow">					
						<div th:if="${row.depth}>0" th:each="re:${#numbers.sequence(1,row.depth)}" 						
						th:text="${row.depth}==${re} ? '&nbsp;&nbsp;ㄴRE::&nbsp; ':'&nbsp;&nbsp;&nbsp;&nbsp;'" style="float: left; color: green; font-weight: bold;">	
						</div>
						<div style="display: flex;"></div>
						<div th:text="${row.title}"></div>
					</td>
<!-- 					<td class="text-overflow"  th:if="${row.depth}==0" th:text="${row.title}"></td>	 -->
					<td th:text="${row.writer}"></td>	
					<td th:text="${row.writeDate}"></td>
					<td th:text="${row.readCount}"></td>

				</tr>
			</tbody>
		</table>	
	
	<div>
		<nav class="page navigation" >
		
              <ul class="pagination justify-content-center">
              
              <li th:if="${pageMaker.prev} == true" class="page-item">
              	<a class="page-link"  th:href="@{/list(pageNum=${pageMaker.startPage}-1,amount=${pageMaker.cri.amount})}">&laquo;</a>
              </li>
              
              <li class="page-item" th:each="num:${#numbers.sequence(pageMaker.startPage,pageMaker.endPage)}"
                th:classappend="${pageMaker.cri.pageNum} == ${num} ? active : null">
                <a  class="page-link" th:href="@{list(pageNum=${num},amount=${pageMaker.cri.amount})}" th:text="${num}"></a>
              </li>
                
              <li class="page-item" th:if="${pageMaker.next} == true and ${pageMaker.endPage > 0}">
              	<a class="page-link"  th:href="@{list(pageNum=${pageMaker.endPage}+1,amount=${pageMaker.cri.amount})}">&raquo;</a>
              </li>
              
              </ul>
    	</nav>    
    		<a class="btn btn-primary" th:href="@{/formWriteNotice}">글쓰기</a>      
    </div>
   </div>

</body>
</html>

